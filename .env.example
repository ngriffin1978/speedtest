# SD-WAN Speed Test Server Configuration
# Copy this file to .env and customize for your environment

# ============================================================================
# REQUIRED CONFIGURATION
# ============================================================================

# Data Center Identification
# This identifies your deployment location in test results
# Examples: DC1-SJC, DC2-NYC, BRANCH-CHI, HQ-MAIN
DATA_CENTER_ID=DC1-UNKNOWN

# ============================================================================
# NETWORK PORTS
# ============================================================================

# Gold Transport Port (typically MPLS/premium path)
# SD-WAN policy should steer port 8888 traffic over Gold transport
GOLD_PORT=8888

# Silver Transport Port (typically Internet/backup path)
# SD-WAN policy should steer port 8889 traffic over Silver transport
SILVER_PORT=8889

# ============================================================================
# TEST LIMITS
# ============================================================================

# Maximum number of concurrent tests across all clients
# Prevents server overload
MAX_CONCURRENT_TESTS=20

# Maximum test duration in seconds (10 minutes)
# Prevents infinitely running tests
MAX_TEST_DURATION=600

# Maximum upload size in bytes (250 MB)
# Note: Uploads are immediately discarded, not stored
MAX_UPLOAD_SIZE=262144000

# ============================================================================
# RATE LIMITING
# ============================================================================

# Rate limit window in milliseconds (60 seconds)
RATE_LIMIT_WINDOW=60000

# Maximum requests per IP per window
RATE_LIMIT_MAX_REQUESTS=100

# Maximum concurrent tests per IP address
RATE_LIMIT_PER_IP_CONCURRENT=3

# ============================================================================
# DIAGNOSTICS (LUDACRIS MODE)
# ============================================================================

# Enable diagnostic tests (traceroute, MTR, MTU detection)
# Set to 'false' to disable for security
ENABLE_DIAGNOSTICS=true

# Comma-separated list of approved targets for diagnostic tests
# Only these IPs can be used with traceroute/MTR
# Include your data centers, HQ, and public DNS servers
APPROVED_TARGETS=8.8.8.8,1.1.1.1,10.0.0.1

# Maximum concurrent diagnostic operations
MAX_CONCURRENT_DIAGNOSTICS=5

# Diagnostic command timeout in milliseconds (30 seconds)
DIAGNOSTIC_TIMEOUT=30000

# ============================================================================
# LOGGING
# ============================================================================

# Logging level: debug, info, warn, error
LOG_LEVEL=info

# Application environment: development, production, test
NODE_ENV=production

# ============================================================================
# TESTING CONFIGURATION (CI/CD)
# ============================================================================

# For CI/CD environments, use higher limits:
# RATE_LIMIT_MAX_REQUESTS=1000
# RATE_LIMIT_PER_IP_CONCURRENT=20
# MAX_CONCURRENT_TESTS=50
# ENABLE_DIAGNOSTICS=false
# NODE_ENV=test
